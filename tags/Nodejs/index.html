<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>태그: Nodejs - Juryeon Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Juryeon Blog"><meta name="msapplication-TileImage" content="/image/og_image.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Juryeon Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Juryeon Blog"><meta property="og:url" content="http://hanjuren.github.io/"><meta property="og:site_name" content="Juryeon Blog"><meta property="og:locale" content="ko_KR"><meta property="og:image" content="http://hanjuren.github.io/img/og_image.png"><meta property="article:author" content="han Ju Ryeon"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://hanjuren.github.io"},"headline":"Juryeon Blog","image":["http://hanjuren.github.io/img/og_image.png"],"author":{"@type":"Person","name":"han Ju Ryeon"},"publisher":{"@type":"Organization","name":"Juryeon Blog","logo":{"@type":"ImageObject","url":"http://hanjuren.github.io/images/bloglogo.png"}},"description":""}</script><link rel="icon" href="/image/og_image.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/rss2.xml" title="Juryeon Blog" type="application/rss+xml">
</head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/images/bloglogo.png" alt="Juryeon Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/hanjuren"><i class="fab fa-github"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-9-desktop is-9-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags">태그</a></li><li class="is-active"><a href="#" aria-current="page">Nodejs</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2022-01-01T06:38:15.000Z" title="1/1/2022, 3:38:15 PM">2022-01-01</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2022-01-01T08:51:42.980Z" title="1/1/2022, 5:51:42 PM">2022-01-01</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/sequelize/">sequelize</a><span> / </span><a class="link-muted" href="/categories/Docker/">Docker</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/01/01/sequelize/Sequelize-Migration/">Sequelize Migration</a></h1><div class="content"><p>도커를 통해 데이터베이스를 띄우고 express를 실행시켜 연결을 해보았다. MySQL과 연결하여 데이터베이스를 사용하기 위해서 Sequelize를 사용하여 연결까지 성공적으로 연결을 진행하였다.</p>
<p>기존에 시퀄라이즈를 사용할때는 모델을 모두 정의한 후 데이터베이스를 생성하고 모델의 수정사항이 있을때마다 **Sync({ force: false || true })**옵션을 통해 데이터베이스를 수정하며 진행했다. 물론 혼자 사용하는 데이터베이스고 서비스를 하지 않는 디비여서 이런방식으로 사용해도 무방하지만 실무에서 사용하는 데이터베이스는 많은 데이터가 있고 구조의 변경이 일어날때 마다 데이터를 백업한다던지 새로 덤프 한다는 것은 현실적으로 어려움이 있다.</p>
<p>이러한 문제점을 보완하기 위해 ORM에서는 마이그레이션 기능을 지원한다. 마이그레이션이란 어떤 운영환경에서 다른 환경으로 환경의 변화를 위해 옮겨지는 작업을 의미한다.</p>
<h3 id="데이터베이스-마이그레이션이란"><a href="#데이터베이스-마이그레이션이란" class="headerlink" title="데이터베이스 마이그레이션이란."></a>데이터베이스 마이그레이션이란.</h3><blockquote>
<p>데이터베이스 마이그레이션이란 하나의 데이터베이스를 다른 종류의 데이터베이스로 데이터를 옮기는 경우 혹은 두개의 데이터베이스를 하나의 시스템으로 합치거나 분할 혹은 데이터베이스 모델의 구조적 변경을 진행 하는 모든 과정을 의미한다.<br><a target="_blank" rel="external nofollow noopener noreferrer" href="http://wiki.hash.kr/index.php/%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98">데이터 베이스 마이그레이션이란?</a></p>
</blockquote>
<p>그렇다면 시퀄라이즈에서 제공하는 Migration 기능에는 어떤 기능이 있을까? 시퀄라이즈에서는 몇가지 명령어를 통해 마이그레이션 기능을 사용할 수 있다고 한다.</p></div><a class="article-more button is-small is-size-7" href="/2022/01/01/sequelize/Sequelize-Migration/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-12-30T08:56:46.000Z" title="12/30/2021, 5:56:46 PM">2021-12-30</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-12-30T09:27:23.470Z" title="12/30/2021, 6:27:23 PM">2021-12-30</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/Docker/">Docker</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/30/docker/Doker-Mysql-sequelize/">Doker Mysql(sequelize)</a></h1><div class="content"><h2 id="Docker-MySQL-Express-연결하기"><a href="#Docker-MySQL-Express-연결하기" class="headerlink" title="Docker MySQL Express 연결하기"></a>Docker MySQL Express 연결하기</h2><p>이전 도커로 express앱을 띄운 후 연결 확인 후 데이터 베이스를 도커로 실행 한 후 express와 연결하는 테스트를 진행해보도록 하자.</p>
<p>먼저 docker-compose.yml에 mysql이미지를 추가해준다.</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">command:</span></span><br><span class="line">      <span class="string">--default-authentication-plugin=mysql_native_password</span></span><br><span class="line">      <span class="string">--character-set-server=utf8mb4</span></span><br><span class="line">      <span class="string">--collation-server=utf8mb4_unicode_ci</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="comment"># Database Name</span></span><br><span class="line">      <span class="attr">MYSQL_USER:</span> <span class="comment"># User name</span></span><br><span class="line">      <span class="attr">MYSQL_PASSWORD:</span> <span class="comment"># Password</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="comment"># Root Password</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data:/var/lib/mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql.conf:/etc/mysql/conf.d</span></span><br></pre></td></tr></table></figure>
<p><strong>docker-compose up</strong> 명령 실행 후 mysql이 실행중인 것을 확인하고 docker exec -it #{name} bash 를 통해 mysql로 접근이 가능하다.</p></div><a class="article-more button is-small is-size-7" href="/2021/12/30/docker/Doker-Mysql-sequelize/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-12-19T08:03:31.000Z" title="12/19/2021, 5:03:31 PM">2021-12-19</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-12-19T08:26:03.865Z" title="12/19/2021, 5:26:03 PM">2021-12-19</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/Docker/">Docker</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/19/docker/Docker-Node-js-nodemon/">Docker Node.js nodemon</a></h1><div class="content"><p>도커를 활용하여 Express를 구동하기 위해 이전 포스팅을 통해 기본적인 앱을 띄워 보았다. 도커를 통해 express를 실행하였지만 코드의 수정이 있을 때 마다 빌드를 다시 해주어야 하는 문제점이 있었다.<br>node.js에서는 nodemon이라는 모듈을 사용하여 개발환경에서 코드의 변경사항이 감지되었을때 자동으로 코드의 반영사항을 포함하기 위해 서버를 재시동 해주며 개발을 진행한다.  </p>
<p>도커를 통해 띄운 express를 로컬에서 작업 후 변경사항을 반영해주기 위해서는 도커의 작업 디렉토리와 로컬 작업 디렉토리를 볼륨 연결 설정을 통해 연결해주고 nodemon으로 express를 구동해주면 된다.</p>
<ol>
<li>docker-compose.yml<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3.8&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7</span></span><br><span class="line">    <span class="attr">command:</span></span><br><span class="line">      <span class="string">--default-authentication-plugin=mysql_native_password</span></span><br><span class="line">      <span class="string">--character-set-server=utf8mb4</span></span><br><span class="line">      <span class="string">--collation-server=utf8mb4_unicode_ci</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_DATABASE:</span> <span class="string">test</span></span><br><span class="line">      <span class="attr">MYSQL_USER:</span> <span class="string">test</span></span><br><span class="line">      <span class="attr">MYSQL_PASSWORD:</span> <span class="string">1210ss</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">1210ss</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data:/var/lib/mysql</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mysql.conf:/etc/mysql/conf.d</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">docker-test:</span></span><br><span class="line">    <span class="attr">build:</span></span><br><span class="line">      <span class="attr">context:</span> <span class="string">.</span></span><br><span class="line">      <span class="attr">args:</span></span><br><span class="line">        <span class="attr">PORT:</span> <span class="string">&quot;4000&quot;</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">docker-node-app</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">docker-node-app</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">.:/usr/src/app</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">/usr/src/app/node_modules</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;1210:4000&quot;</span></span><br></pre></td></tr></table></figure>
docker-compose.yml 파일을 통해 여러 컨테이너를 한번에 관리해주는 방식으로 하나의 서비스를 위해 실행하거나 존재해야하는 이미지들을 한 파일을 통해 정의하는 방식이다.</li>
</ol>
<p>mysql은 이 후 사용할 예정이므로 넘어가도록 하고 volumes옵션이 중요한 부분이다.</p>
<p>volumes은 다음과 같이 작성해 주면된다. &lt;로컬 작업 디렉토리&gt;:&lt;도커 컨테이너 디렉토리&gt; 이것은 로컬 디렉토리와 도커의 디렉토리를 연결하겠다는 의미로 코드의 변경이나 생성 삭제와 같은 작업의 결과를 공유해준다.</p>
<p>이 후 nodemon을 통해 express 를 실행하고 로컬에서 작업 후 변경사항이 생기게 되면 도커에서 실행중인 express가 재시동 되며 수정 사항을 반영하게 된다.</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> node:<span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ARG</span> PORT</span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> mkdir -p /usr/src/app</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> /usr/src/app</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># . 은 현재 디렉토리의 모든것을 /usr/src/app으로 복사한다는 의미다.</span></span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> . /usr/src/app</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> npm install -g nodemon</span></span><br><span class="line"><span class="comment"># Bundle app source</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> $PORT</span><br><span class="line"></span><br><span class="line"><span class="comment"># 도커에서 nodemon을 실행하기 위해 필요한 옵션</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> [<span class="string">&quot;nodemon&quot;</span>, <span class="string">&quot;-L&quot;</span>, <span class="string">&quot;app.js&quot;</span>]</span></span><br></pre></td></tr></table></figure>

<p>컨테이너를 다시 빌드 후 접속하고 코드를 수정하면 변경사항이 자동으로 반영되는 모습을 확인 할 수 있다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-12-05T07:04:53.000Z" title="12/5/2021, 4:04:53 PM">2021-12-05</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-12-19T08:05:42.793Z" title="12/19/2021, 5:05:42 PM">2021-12-19</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/Docker/">Docker</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/12/05/docker/Docker-%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0/">Docker 개발환경 세팅하기</a></h1><div class="content"><h2 id="Docker-개발-환경-구축"><a href="#Docker-개발-환경-구축" class="headerlink" title="Docker 개발 환경 구축"></a>Docker 개발 환경 구축</h2><p>회사에서 처음 클론 받은 레포지토리의 개발 환경 구축을 위해 도커환경을 구축하며 사용하던 명령어들과 도커를 이용하여 프로젝트 환경을 세팅하는 기본적인 것들에 대해서 기록하고자 글을 남깁니다.</p>
<p><img src="https://ifh.cc/g/J2xbO0.png," title="도커 로고"></p></div><a class="article-more button is-small is-size-7" href="/2021/12/05/docker/Docker-%EA%B0%9C%EB%B0%9C%ED%99%98%EA%B2%BD-%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-09-09T08:58:37.000Z" title="9/9/2021, 5:58:37 PM">2021-09-09</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-12-05T05:38:52.432Z" title="12/5/2021, 2:38:52 PM">2021-12-05</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/express/">express</a><span> / </span><a class="link-muted" href="/categories/Projects/">Projects</a><span> / </span><a class="link-muted" href="/categories/Projects/CloneCoding/">CloneCoding</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/09/project/airbnb/Nodejs-express%EB%A1%9C-%EC%97%90%EC%96%B4%EB%B9%84%EC%95%A4%EB%B9%84-%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9-%ED%95%B4%EB%B3%B4%EA%B8%B0-5/">Nodejs express로 에어비앤비 클론코딩 해보기 5.</a></h1><div class="content"><h2 id="도시별-숙소-보여주기"><a href="#도시별-숙소-보여주기" class="headerlink" title="도시별 숙소 보여주기"></a>도시별 숙소 보여주기</h2>
<h3 id="도시별-숙소-라우터"><a href="#도시별-숙소-라우터" class="headerlink" title="도시별 숙소 라우터"></a>도시별 숙소 라우터</h3>
<figure class="highlight jsx">
  <table>
    <tr>
      <td class="gutter">
        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre>
      </td>
      <td class="code">
        <pre><span class="line">router.get(<span class="string">&#x27;/city&#x27;</span>, <span class="keyword">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">           </span><br><span class="line">            <span class="keyword">let</span> hosts;</span><br><span class="line">            <span class="keyword">let</span> count;</span><br><span class="line">            <span class="keyword">let</span> city;</span><br><span class="line">            <span class="keyword">let</span> category</span><br><span class="line">...</span><br><span class="line">                        hosts = <span class="keyword">await</span> Host.findAll(&#123;</span><br><span class="line">                    <span class="attr">where</span>: &#123;</span><br><span class="line">                        <span class="attr">hostaddress</span>: &#123;</span><br><span class="line">                            [Op.like]: <span class="string">&quot;%&quot;</span> + req.query.city + <span class="string">&quot;%&quot;</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">include</span>: &#123;</span><br><span class="line">                        <span class="attr">model</span>: Image,</span><br><span class="line">                        <span class="attr">attributes</span>: [<span class="string">&#x27;src&#x27;</span>],</span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">order</span>: [[<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;DESC&#x27;</span>]],</span><br><span class="line">                    <span class="attr">offset</span>: offset,</span><br><span class="line">                    <span class="attr">limit</span>: <span class="number">12</span>,</span><br><span class="line">                            </span><br><span class="line">                         &#125;);</span><br><span class="line">            count = <span class="keyword">await</span> Host.count(&#123;</span><br><span class="line">                <span class="attr">where</span>: &#123;</span><br><span class="line">                    <span class="attr">city</span>: &#123;</span><br><span class="line">                        [Op.like]: <span class="string">&quot;%&quot;</span> + req.query.city + <span class="string">&quot;%&quot;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">if</span>(req.query.city) &#123;</span><br><span class="line">                city = req.query.city;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                city = <span class="string">&quot;전체&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">            res.render(<span class="string">&#x27;hosts&#x27;</span>, &#123;hosts, count, city&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(error);</span><br><span class="line">        next(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre>
      </td>
    </tr>
  </table>
</figure>

<p>숙소의 주소 중 도시 컬럼의 값을 비교하여 해당 도시의 숙소를 가져오는 방식이다. </p></div><a class="article-more button is-small is-size-7" href="/2021/09/09/project/airbnb/Nodejs-express%EB%A1%9C-%EC%97%90%EC%96%B4%EB%B9%84%EC%95%A4%EB%B9%84-%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9-%ED%95%B4%EB%B3%B4%EA%B8%B0-5/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-09-09T08:57:37.000Z" title="9/9/2021, 5:57:37 PM">2021-09-09</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-12-05T05:38:52.432Z" title="12/5/2021, 2:38:52 PM">2021-12-05</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/express/">express</a><span> / </span><a class="link-muted" href="/categories/Projects/">Projects</a><span> / </span><a class="link-muted" href="/categories/Projects/CloneCoding/">CloneCoding</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/09/project/airbnb/Nodejs-express%EB%A1%9C-%EC%97%90%EC%96%B4%EB%B9%84%EC%95%A4%EB%B9%84-%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9-%ED%95%B4%EB%B3%B4%EA%B8%B0-4/">Nodejs express로 에어비앤비 클론코딩 해보기 4.</a></h1><div class="content"><h2 id="local-계정-회원가입-구현"><a href="#local-계정-회원가입-구현" class="headerlink" title="local 계정 회원가입 구현"></a>local 계정 회원가입 구현</h2>
<figure class="highlight jsx">
  <table>
    <tr>
      <td class="gutter">
        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre>
      </td>
      <td class="code">
        <pre><span class="line"><span class="comment">// 프론트 코드</span></span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;join__form&#x27;</span>).addEventListener(<span class="string">&#x27;submit&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">            e.preventDefault();</span><br><span class="line">            <span class="keyword">const</span> joinData = &#123;</span><br><span class="line">                <span class="attr">email</span>: e.target.email.value,</span><br><span class="line">                <span class="attr">password</span>: e.target.password.value,</span><br><span class="line">                <span class="attr">name</span>: e.target.name.value,</span><br><span class="line">                <span class="attr">nickname</span>: e.target.nickname.value,</span><br><span class="line">                <span class="attr">phone</span>: e.target.firstNum.value + e.target.middleNum.value + e.target.lastNum.value,</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="built_in">console</span>.log(joinData);  </span><br><span class="line">            <span class="keyword">if</span>(joinData.email === <span class="string">&quot;&quot;</span> ) &#123;</span><br><span class="line">                <span class="keyword">return</span> alert(<span class="string">&#x27;이메일을 입력해주세요.&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(joinData.password &lt; <span class="number">4</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> alert(<span class="string">&#x27;비밀번호는 4글자 이상입니다.&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(joinData.name === <span class="string">&quot;&quot;</span> || joinData.nickname === <span class="string">&quot;&quot;</span> || joinData.phone === <span class="string">&quot;&quot;</span> || joinData.phone.length &gt; <span class="number">11</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> alert(<span class="string">&#x27;잘못된 정보입니다.&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">             axios.post(<span class="string">&#x27;/auth/join&#x27;</span>, joinData)</span><br><span class="line">                .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span>(response.data.joinsuccess)&#123;</span><br><span class="line">                        alert(response.data.message);</span><br><span class="line">                        <span class="keyword">return</span> <span class="built_in">window</span>.location = <span class="string">&quot;/login&quot;</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    alert(response.data.message);</span><br><span class="line">                    <span class="keyword">return</span> location.reload();</span><br><span class="line">                &#125;)</span><br><span class="line">                .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(error);</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">           </span><br><span class="line">            e.target.email.value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            e.target.password.value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            e.target.name.value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            e.target.nickname.value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            e.target.firstNum.value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            e.target.middleNum.value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">            e.target.lastNum.value = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">// 서버 코드</span></span><br><span class="line">router.post(<span class="string">&#x27;/join&#x27;</span>, isNotLoggedIn, <span class="keyword">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;</span><br><span class="line">            email,</span><br><span class="line">            password,</span><br><span class="line">            name,</span><br><span class="line">            nickname,</span><br><span class="line">            phone,</span><br><span class="line">        &#125; = req.body;</span><br><span class="line">        <span class="built_in">console</span>.log(req.body);</span><br><span class="line">        <span class="comment">//const phone = firstNum + middleNum + lastNum;</span></span><br><span class="line">        <span class="keyword">const</span> user = <span class="keyword">await</span> User.findOne(&#123; <span class="attr">where</span>: &#123;email&#125; &#125;);</span><br><span class="line">        <span class="keyword">if</span>(user) &#123;</span><br><span class="line">            <span class="keyword">return</span> res.json(&#123; <span class="attr">joinsuccess</span>: <span class="literal">false</span>, <span class="attr">message</span>: <span class="string">&quot;입력하신 이메일로 가입한 계정이 존재합니다...&quot;</span> &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> hash = <span class="keyword">await</span> bcrypt.hash(password, <span class="number">12</span>);</span><br><span class="line">        <span class="keyword">const</span> newUser = <span class="keyword">await</span> User.create(&#123;</span><br><span class="line">            email,</span><br><span class="line">            <span class="attr">password</span>: hash,</span><br><span class="line">            name,</span><br><span class="line">            nickname,</span><br><span class="line">            phone,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> res.json(&#123; <span class="attr">joinsuccess</span>: <span class="literal">true</span>, <span class="attr">message</span>: <span class="string">&quot;회원가입 성공입니다.&quot;</span>&#125;);</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(error);</span><br><span class="line">        <span class="keyword">return</span> res.json(&#123; <span class="attr">joinsuccess</span>: <span class="literal">false</span>, <span class="attr">message</span>: <span class="string">&quot;데이터 베이스 오류 입니다 관리자에게 문의 하세요...&quot;</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre>
      </td>
    </tr>
  </table>
</figure>
<span id="more"></span>

<p>회원 가입 페이지에서 가입 정보를 받아온 후 User모델에 새로운 데이터를 생성하여 회원을 생성한다.</p>
<p>가입 전 회원을 구분할 수 있는 이메일로 기존의 데이터와 일치한 정보가 있는지 확인을 하고 없을 때 생성하는 방식으로 진행했다…</p>
<h2 id="결과"><a href="#결과" class="headerlink" title="결과"></a>결과</h2>
<p><img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/6fa7371a-0d2f-4099-8e19-5a3fb71983f9/_.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210909%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210909T103605Z&X-Amz-Expires=86400&X-Amz-Signature=3d441bdc141d5e33acdda28565b6c49e00726eb4a9d020192680260ac7f4200b&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22_.png%22"></p>
<p>회원 가입을 할 정보를 입력한다.</p>
<p><img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/83a0390f-09ca-4091-b5c8-a458c55e1311/_.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210909%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210909T103623Z&X-Amz-Expires=86400&X-Amz-Signature=22c49db3a928325e2e50eca7c9d3f66ddfdc8d9a7fe984245825e01f65080766&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22_.png%22"></p>
<p>서버에서 처리 후 json형식으로 보낸 데이터에 따라 성공 실패 여부를 확인 한다.</p>
<p>입력한 데이터가 없는 회원이기 때문에 성공이라는 메시지를 띄웠고 성공했다는 것을 알수있다..✌✌</p>
<p><img src="https://s3.us-west-2.amazonaws.com/secure.notion-static.com/91fa0682-b4b5-439f-96c9-e5f312bcca18/_.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIAT73L2G45O3KS52Y5%2F20210909%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20210909T103640Z&X-Amz-Expires=86400&X-Amz-Signature=bfd431882f62acae33fd431d8bf2ba957ccc73bf29114b67bd88365c9f9d8e40&X-Amz-SignedHeaders=host&response-content-disposition=filename%20%3D%22_.png%22"></p>
<p>users 테이블을 확인하면 아까 입력한 데이터가 성공적으로 생성 된 것을 확인 할 수 있다. 👍</p>
<h2 id="문제점"><a href="#문제점" class="headerlink" title="문제점"></a>문제점</h2>
<p>로컬 계정 회원 가입 처리 코드 작성은 간단하게 구현해서 어렵게 느껴지지는 않았지만… 페이지에서 데이터를 보낼 때 검사하는 방법이 너무 많고 어려운게 많아서 간단하게 검사 후 서버로 </p>
<p>데이터를 보내는 방식으로 진행했다… </p>
<p>자바 스크립트를 이용해서 데이터를 검사해서 보내야 하는 방법에 치여서 조금 어려움을 느꼈다 자바스크립트의 공부가 필요하다는 것을 느끼는 과정 이였다.</p>
<h2 id="보완점"><a href="#보완점" class="headerlink" title="보완점"></a>보완점</h2>
<p>혼자 하는 프로젝트라서 많은 것을 축소해서 진행 하려 하다 보니 회원 가입 과정이 너무 단순하다는 생각이 들었다. 많은 사이트들을 참고해서 비슷한 과정으로 만들고 싶었지만</p>
<p>본인 인증 부분을 제외 시킨 것이 조금 아쉽다. </p>
<p>본인 인증 구현도 공부해서 사용해봐야겠다.</p>
</div>
<div class="article-licensing box">
<div class="licensing-title">
  <p>Nodejs express로 에어비앤비 클론코딩 해보기 4.</p>
  <p><a href="https://hanjuren.github.io/2021/08/31/project/airbnb/Nodejs-express로-에어비앤비-클론코딩-해보기-4/">https://hanjuren.github.io/2021/08/31/project/airbnb/Nodejs-express로-에어비앤비-클론코딩-해보기-4/</a></p>
</div>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-09-09T08:55:52.000Z" title="9/9/2021, 5:55:52 PM">2021-09-09</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-12-05T05:38:52.432Z" title="12/5/2021, 2:38:52 PM">2021-12-05</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/express/">express</a><span> / </span><a class="link-muted" href="/categories/Projects/">Projects</a><span> / </span><a class="link-muted" href="/categories/Projects/CloneCoding/">CloneCoding</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/09/project/airbnb/Nodejs-express%EB%A1%9C-%EC%97%90%EC%96%B4%EB%B9%84%EC%95%A4%EB%B9%84-%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9-%ED%95%B4%EB%B3%B4%EA%B8%B0-3/">Nodejs express로 에어비앤비 클론코딩 해보기 3.</a></h1><div class="content"><h2 id="숙소-업로드-구현"><a href="#숙소-업로드-구현" class="headerlink" title="숙소 업로드 구현"></a>숙소 업로드 구현</h2>
<h3 id="숙소-업로드-라우터"><a href="#숙소-업로드-라우터" class="headerlink" title="숙소 업로드 라우터"></a>숙소 업로드 라우터</h3>
<figure class="highlight jsx">
<table>
  <tr>
    <td class="gutter">
      <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre>
    </td>
    <td class="code">
      <pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    fs.readdirSync(<span class="string">&#x27;uploads&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(<span class="string">&#x27;uploads 폴더가 없어 uploads 폴더를 생성 합니다.&#x27;</span>);</span><br><span class="line">    fs.mkdirSync(<span class="string">&#x27;uploads&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> upload = multer(&#123;</span><br><span class="line">    <span class="attr">storage</span>: multer.diskStorage(&#123;</span><br><span class="line">        <span class="function"><span class="title">destination</span>(<span class="params">req, file, cb</span>)</span> &#123;</span><br><span class="line">            cb(<span class="literal">null</span>, <span class="string">&#x27;uploads/&#x27;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="title">filename</span>(<span class="params">req, file, cb</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> ext = path.extname(file.originalname);</span><br><span class="line">            cb(<span class="literal">null</span>, path.basename(file.originalname, ext) + <span class="built_in">Date</span>.now() + ext);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 게시글 업로드</span></span><br><span class="line">router.post(<span class="string">&#x27;/host&#x27;</span>, isLoggedIn, upload.array(<span class="string">&#x27;img&#x27;</span>), <span class="keyword">async</span> (req, res, next) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> hostaddress = req.body.firstCity.concat(<span class="string">&quot; &quot;</span>, req.body.middleCity,<span class="string">&quot; &quot;</span>, req.body.hostaddress);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> newHost = <span class="keyword">await</span> Host.create(&#123;</span><br><span class="line">            <span class="attr">title</span>: req.body.title,</span><br><span class="line">            hostaddress,</span><br><span class="line">            <span class="attr">city</span>: req.body.firstCity,</span><br><span class="line">            <span class="attr">person</span>: req.body.person,</span><br><span class="line">            <span class="attr">roominfo_room</span>: req.body.room,</span><br><span class="line">            <span class="attr">roominfo_bed</span>: req.body.bed,</span><br><span class="line">            <span class="attr">roominfo_cook</span>: req.body.cook,</span><br><span class="line">            <span class="attr">roominfo_bathroom</span>: req.body.bathroom,</span><br><span class="line">            <span class="attr">hostinfo</span>: req.body.hostinfo,</span><br><span class="line">            <span class="attr">hosttype</span>: req.body.hosttype,</span><br><span class="line">            <span class="attr">UserId</span>: req.user.id,</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">for</span>(i=<span class="number">0</span>; i&lt;req.files.length; i++)&#123;</span><br><span class="line">            <span class="keyword">let</span> newImage = <span class="keyword">await</span> Image.create(&#123;</span><br><span class="line">                <span class="attr">src</span>: <span class="string">&quot;img/&quot;</span> + req.files[i].filename,</span><br><span class="line">                <span class="attr">HostId</span>: newHost.id,</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">        res.redirect(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">        next(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre>
    </td>
  </tr>
</table>
</figure>

<p>숙소 업로드 라우터는 숙소 정보를 담는 Host모델과 숙소의 사진을 담는 Image모델을 사용하여 업로드를 진행한다.</p>
<p>사진 파일들은 multer 모델을 사용하여 업로드했고 이미지의 파일 이름을 Image모델에 담아 주었다. </p>
<p>이미지 업로드는 이미지의 갯수 만큼 생성하도록 반복문을 사용하여 진행했는데 더 좋은 방법이 있을 수 도 있지만 간단하게 구현 했다.</p></div><a class="article-more button is-small is-size-7" href="/2021/09/09/project/airbnb/Nodejs-express%EB%A1%9C-%EC%97%90%EC%96%B4%EB%B9%84%EC%95%A4%EB%B9%84-%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9-%ED%95%B4%EB%B3%B4%EA%B8%B0-3/#more">자세히 보기</a></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-09-09T08:54:01.000Z" title="9/9/2021, 5:54:01 PM">2021-09-09</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-12-05T05:38:52.431Z" title="12/5/2021, 2:38:52 PM">2021-12-05</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/express/">express</a><span> / </span><a class="link-muted" href="/categories/Projects/">Projects</a><span> / </span><a class="link-muted" href="/categories/Projects/CloneCoding/">CloneCoding</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/09/project/airbnb/Nodejs-express%EB%A1%9C-%EC%97%90%EC%96%B4%EB%B9%84%EC%95%A4%EB%B9%84-%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9-%ED%95%B4%EB%B3%B4%EA%B8%B0-2/">Nodejs express로 에어비앤비 클론코딩 해보기 2.</a></h1><div class="content"><h2 id="Sequelize-Model-구축"><a href="#Sequelize-Model-구축" class="headerlink" title="Sequelize Model 구축"></a>Sequelize Model 구축</h2>
<p>Mysql 데이터베이스를 사용하며 Sequelize를 통해 데이터 관리를 했다. 시쿼라이즈를 통한 데이터베이스 사용을 위해 모델을 구축하는 과정을 기록합니다.</p>
<h3 id="DB-관계"><a href="#DB-관계" class="headerlink" title="DB 관계"></a>DB 관계</h3>
<p>User 1 : N Host<br>User 1 : N Review<br>User 1 : N Reservation<br>User 1 : N Favorite</p>
<p>Host 1 : N Image<br>Host 1 : N Favorite<br>Host 1 : N Reservation<br>Host 1 : N Review</p>
<p>많은 모델을 설계하지는 않았지만 각각 필요한 모델이라고 생각하는 모델을 구축했다.<br>기본적으로 유저와 게시글을 기준하여 예약 기능에 필요한 모델 찜 모델, 리뷰 모델 정도로 구성했다.</p>
<p>자세한 코드는 깃헙에 올렸으니 기본적인 관계 설정과 모델 구조는 깃에서 확인하면 될 것 같다.
  <br>Model file : <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/hanjuren/Node/tree/master/server/models">
    github</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-09-09T08:52:19.000Z" title="9/9/2021, 5:52:19 PM">2021-09-09</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-12-05T05:38:52.431Z" title="12/5/2021, 2:38:52 PM">2021-12-05</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/express/">express</a><span> / </span><a class="link-muted" href="/categories/Projects/">Projects</a><span> / </span><a class="link-muted" href="/categories/Projects/CloneCoding/">CloneCoding</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/09/project/airbnb/Nodejs-express%EB%A1%9C-%EC%97%90%EC%96%B4%EB%B9%84%EC%95%A4%EB%B9%84-%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9-%ED%95%B4%EB%B3%B4%EA%B8%B0-1/">Nodejs express로 에어비앤비 클론코딩 해보기 1.</a></h1><div class="content"><h2 id="에어비앤비-클론코딩-해보기-1"><a href="#에어비앤비-클론코딩-해보기-1" class="headerlink" title="에어비앤비 클론코딩 해보기 1."></a>에어비앤비 클론코딩 해보기 1.</h2>
<p>Nodejs를 학습하고 학습한 내용을 바탕으로 무언가를 만들어봐야 겠다는 마음 하나로 무턱대고 혼자 진행했던 프로젝트입니다.<br>실제 서비스까지의 구현을 목표로 하지 않고 node.js와 express를 이용한 앱을 만들어보고자 진행했던 프로젝트라 많이 힘들었고 좋은 결과물이 나오지는 못했지만 처음으로 스스로 처음부터 만들어본 것 이기 때문에 이후 다른 어떤 프로젝트에서도 기본적인 개념을 알고 진행하는데 있어 충분한 학습 효과가 있었던 프로젝트 입니다.</p>
<p>Github : <a target="_blank" rel="external nofollow noopener noreferrer" href="https://github.com/hanjuren/Node">https://github.com/hanjuren/Node</a></p>
<span id="more"></span>
<h2 id="프로젝트의-전체적인-구조"><a href="#프로젝트의-전체적인-구조" class="headerlink" title="프로젝트의 전체적인 구조"></a>프로젝트의 전체적인 구조</h2>
<ul>
  <li>Nodejs기반 express앱</li>
  <li>mysql 데이터 베이스 사용 및 sequelize 사용</li>
  <li>view를 위해 nunjucks 템플릿 엔진 사용</li>
  <li>passport를 통한 사용자 인증 기능 구현</li>
</ul>
<h2 id="완성-결과"><a href="#완성-결과" class="headerlink" title="완성 결과"></a>완성 결과</h2><!-- <div class="video-container"><iframe src="https://www.youtube.com/embed/NDfvuQ8b1L0" frameborder="0" loading="lazy" allowfullscreen></iframe></div> -->

<h2 id="사용한-패키지"><a href="#사용한-패키지" class="headerlink" title="사용한 패키지"></a>사용한 패키지</h2>
<ul>
  <li>express</li>
  <li>express-session<ul>
      <li>express-mysql-session</li>
    </ul>
  </li>
  <li>passport<ul>
      <li>passport-local</li>
      <li>passport-kakao</li>
      <li>passport-naver</li>
      <li>passport-facebook</li>
    </ul>
  </li>
  <li>bcrypt</li>
  <li>cookie-parser</li>
  <li>dotenv</li>
  <li>morgan</li>
  <li>multer</li>
  <li>nunjucks</li>
  <li>mysql2</li>
  <li>sequelize<ul>
      <li>sequelize-cli</li>
    </ul>
  </li>
  <li>nodemon</li>
</ul>
<h2 id="프로젝트를-진행하며-느낀점"><a href="#프로젝트를-진행하며-느낀점" class="headerlink" title="프로젝트를 진행하며 느낀점"></a>프로젝트를 진행하며 느낀점</h2><p>node.js의 기본적인 학습만 진행하고 바로 작업을 진행하며 하나씩 붙여나가는 과정이 스스로 무언가를 만들어낸다는 것에 의미가 큰 과정이였습니다.<br>비록 작업을 계속 해나가며 프로젝트의 과정이 설계를 하지 않고 혼자 추가해보고 싶은 기능을 구현하다보니 두서 없는 과정으로 진행되었지만 기능 하나하나 스스로 만들며<br>막히는 부분을 해결해 나가는 과정이 의미있었습니다.<br>하지만 이 과정을 겪고서 작고 사소한 프로젝트라도 시작 전 설계의 중요성과 구조를 잡고 시작해야하는 중요성을 크게 느끼게 되었고 무턱대고 작업을 한다고 해서 그저 돌아가기만 하는 기능을 만드는 것이<br>무의미 하다는 것도 느끼게된 프로젝트 였습니다.<br>아쉬웠던 점은 클론코딩을 하다보니 스스로 생각해내는 기능은 적고 클론코딩의 대상이 된 웹의 기능을 어떤식으로 구현해볼지에 대해 고민을 하던 시간이 대부분이였던 것에 아쉬움을 느꼈습니다.<br>스스로 만들어나가는 과정은 뿌듯했지만 새로운 것을 만들어 낸다는 느낌보다는 기능을 가능한 수준에서 모방하기만 한다는 느낌이 컷던 만큼 이후 프로젝트에서는 하나의 기능을 만들더라도<br>많은 고민과 보다 좋은 기능을 만들 수 있는 측면까지 고민하며 작업해야겠다라고 생각하게 되었습니다.  </p>
<p>또한 이 프로젝트의 결과물에 대해 다시 한번 글을 작성하며 이런 부분은 지금보니 이렇게 개선하면 되겠다는 부분을 생각을 많이 하게되었던 프로젝트 입니다.<br>이 프로젝트에서 했던 내용을 기록하며 다시 공부한다는 마음으로 진행 부분을 기록하려 합니다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2021-09-09T08:04:32.000Z" title="9/9/2021, 5:04:32 PM">2021-09-09</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2021-12-05T05:38:52.430Z" title="12/5/2021, 2:38:52 PM">2021-12-05</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/Nodejs/">Nodejs</a><span> / </span><a class="link-muted" href="/categories/Passport/">Passport</a></span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2021/09/09/nodejs/Passport-passport-local/">Passport(passport-local)</a></h1><div class="content"><h2 id="👍Passport-사용해보기"><a href="#👍Passport-사용해보기" class="headerlink" title="👍Passport 사용해보기"></a>👍Passport 사용해보기</h2>
<p>passport는 Node.js의 인증 미들웨어로 요청에 대한 인증을 위한 패키지이다. 소셜네트워크 서비스의 발전으로 인해 OAuth 인증 방식의 사용이 보편화 되면서 API를 이용하기 위한 방식을 구축해주는 패키지이다.</p>
<span id="more"></span></div><a class="article-more button is-small is-size-7" href="/2021/09/09/nodejs/Passport-passport-local/#more">자세히 보기</a></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/tags/Nodejs/page/0/">이전</a></div><div class="pagination-next"><a href="/tags/Nodejs/page/2/">다음</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/tags/Nodejs/">1</a></li><li><a class="pagination-link" href="/tags/Nodejs/page/2/">2</a></li></ul></nav></div><div class="column column-left is-4-tablet is-3-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/profile.png" alt="Han Ju Ryeon"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Han Ju Ryeon</p><p class="is-size-6 is-block">새로운것을 배우기 위해 노력하는 삶</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>경기도 의왕시</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives"><p class="title">55</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories"><p class="title">18</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags"><p class="title">19</p></a></div></div></nav><div class="level"><a class="level-item button is-info is-outlined is-rounded" href="/" target="_blank" rel="noopener">HOME</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Github" href="https://github.com/hanjuren"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">링크</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://github.com/hanjuren" target="_blank" rel="external nofollow noopener noreferrer"><span class="level-left"><span class="level-item">github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://github.com/hanjuren" target="_blank" rel="external nofollow noopener noreferrer"><span class="level-left"><span class="level-item">notion</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/CodeDeploy/"><span class="level-start"><span class="level-item">CodeDeploy</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Docker/"><span class="level-start"><span class="level-item">Docker</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Nodejs/"><span class="level-start"><span class="level-item">Nodejs</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/Passport/"><span class="level-start"><span class="level-item">Passport</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/PostgreSQL/"><span class="level-start"><span class="level-item">PostgreSQL</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Projects/"><span class="level-start"><span class="level-item">Projects</span></span><span class="level-end"><span class="level-item tag">8</span></span></a><ul><li><a class="level is-mobile" href="/categories/Projects/AptManagement/"><span class="level-start"><span class="level-item">AptManagement</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Projects/CloneCoding/"><span class="level-start"><span class="level-item">CloneCoding</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Ruby/"><span class="level-start"><span class="level-item">Ruby</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/SQLD/"><span class="level-start"><span class="level-item">SQLD</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/Typeorm/"><span class="level-start"><span class="level-item">Typeorm</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Typerom/"><span class="level-start"><span class="level-item">Typerom</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/aws/"><span class="level-start"><span class="level-item">aws</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/ec2/"><span class="level-start"><span class="level-item">ec2</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile" href="/categories/express/"><span class="level-start"><span class="level-item">express</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/github/"><span class="level-start"><span class="level-item">github</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/javascript/"><span class="level-start"><span class="level-item">javascript</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile" href="/categories/sequelize/"><span class="level-start"><span class="level-item">sequelize</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">최근 글</h3><article class="media"><div class="media-content"><p class="date"><time datetime="2022-01-30T10:33:57.000Z">2022-01-30</time></p><p class="title"><a href="/2022/01/30/ruby/Ruby-%EB%A9%94%EC%84%9C%EB%93%9C/">Ruby 메서드</a></p><p class="categories"><a href="/categories/Ruby/">Ruby</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2022-01-30T07:40:22.000Z">2022-01-30</time></p><p class="title"><a href="/2022/01/30/ruby/Ruby-%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D/">Ruby 정규표현식</a></p><p class="categories"><a href="/categories/Ruby/">Ruby</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2022-01-28T08:11:09.000Z">2022-01-28</time></p><p class="title"><a href="/2022/01/28/ruby/Ruby-%ED%8C%8C%EC%9D%BC-%EC%9D%BD%EA%B8%B0-%EC%93%B0%EA%B8%B0/">Ruby 파일 읽기,쓰기</a></p><p class="categories"><a href="/categories/Ruby/">Ruby</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2022-01-08T13:59:02.000Z">2022-01-08</time></p><p class="title"><a href="/2022/01/08/%EC%9D%B8%ED%85%94%EB%A6%AC%EC%A0%9C%EC%9D%B4-%EB%8B%A8%EC%B6%95%ED%82%A4-%EC%A0%95%EB%A6%AC-%EA%B8%B0%EB%A1%9D%EC%A4%91/">웹스톰, 루비마인 단축키 정리(기록중)</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time datetime="2022-01-01T06:38:15.000Z">2022-01-01</time></p><p class="title"><a href="/2022/01/01/sequelize/Sequelize-Migration/">Sequelize Migration</a></p><p class="categories"><a href="/categories/Nodejs/">Nodejs</a> / <a href="/categories/sequelize/">sequelize</a> / <a href="/categories/Docker/">Docker</a></p></div></article></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">태그</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/CodeDeploy/"><span class="tag">CodeDeploy</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Docker/"><span class="tag">Docker</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Node-js/"><span class="tag">Node.js</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Nodejs/"><span class="tag">Nodejs</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Passport/"><span class="tag">Passport</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/PostgreSQL/"><span class="tag">PostgreSQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Projects/"><span class="tag">Projects</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Regexp/"><span class="tag">Regexp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Ruby/"><span class="tag">Ruby</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQLD/"><span class="tag">SQLD</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeORM/"><span class="tag">TypeORM</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/aws/"><span class="tag">aws</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ec2/"><span class="tag">ec2</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/express/"><span class="tag">express</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/github/"><span class="tag">github</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/javascript/"><span class="tag">javascript</span><span class="tag">15</span></a></div><div class="control"><a class="tags has-addons" href="/tags/rubymine/"><span class="tag">rubymine</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/sequelize/"><span class="tag">sequelize</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/webstorm/"><span class="tag">webstorm</span><span class="tag">1</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/images/bloglogo.png" alt="Juryeon Blog" height="28"></a><p class="is-size-7"><span>&copy; 2022 han Ju Ryeon</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Download on GitHub" href="https://github.com/hanjuren"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "이 웹 사이트는 귀하의 경험을 향상시키기 위해 Cookie를 사용합니다.",
          dismiss: "무시",
          allow: "허용",
          deny: "거부",
          link: "더 알아보기",
          policy: "Cookie 정책",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>